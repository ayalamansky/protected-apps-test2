id: stats
type: function
subtype: Function
resourceName: null
template:
  ordered:
    - funcBody: >-
        const transactions = {{ formatDataAsArray(all_transactions.data) }}

        const unpaid = transactions.filter(t => !t.status);

        const paid = transactions.filter(t => t.status).length;

        const lastPaid = transactions.filter(t => t.status).sort((a,b) =>
        moment(a).valueOf() - moment(b).valueOf())[0].date;

        const formatString = s => parseInt(s.split("$")[1])

        const totalUnpaid = _.sumBy(unpaid, t => { const amount =
        formatString(t.amount); return amount; })


        return {
          numPaid: paid, 
          numUnpaid: unpaid.length,
          totalUnpaid, 
          lastPaid,
        }
    - value: ''
createdAt: 2021-06-08T21:06:37.701Z
